<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
	
<h:head>
	<meta charset="utf-8"/>
	
	<!-- LOGIN REDIRECT -->
    <ui:fragment rendered="#{!authenticationController.hasOperatorAccess()}">
		<meta http-equiv="refresh" content="0; url=login.xhtml"/>
    </ui:fragment>
	
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
	<link href="css/bootstrap.min.css" rel="stylesheet"/>
	<link href="css/extra_layout.css" rel="stylesheet"/>
	<link rel="stylesheet" href="css/leaflet.css" />
	<title>Televic Managment Home</title>
</h:head>

<!-- Renders when logged in -->
<h:body rendered="#{authenticationController.hasOperatorAccess()}">	
<div class="container-fluid">
	<div class="row">
	
		<!-- LEFT SIDEBAR -->
		<div class="col-sm-2 sidebar">
			
			<!-- SEARCH INPUT -->
            <form class="form-group" role="search">
   				<div class="input-group">
   					<input type="text" class="form-control" placeholder="Zoek staanplaatsen" name="search_input" id="search_input" autocomplete="off"/>
   					<div class="input-group-btn">
   						<button class="btn btn-default" type="submit"><span class="glyphicon glyphicon-search"></span></button>
   					</div>
   				</div>
   				<div class="dropdown">
   					<a class="dropdown-toggle" data-toggle="dropdown" id="search_dropdown"></a>
   					<ul class="dropdown-menu" id="search_dropdown_list" >
   					</ul>
   				</div>
   			</form> <!-- END SEARCH INPUT -->
   			
   			<!-- SIDEBAR CONTENT --> 	
   			<div class="workplace workplace_active">	
   			
   			<!-- STAANPLAATSEN -->	
			<c:forEach var="workplace" items="#{workplaceController.getAllWorkplaces()}">
                <h4>
                	<span class="glyphicon glyphicon-unchecked sidebar_icon"></span>
                	<h:link value="#{workplace.name}" outcome="workplace.xhtml?workplace_id=#{workplace.id}"/>
                </h4>
   			</c:forEach>
   			</div> <!-- END SIDEBAR CONTENT -->
   		</div> <!-- END LEFT SIDEBAR -->
	
	<!-- MAINVIEW CONTENT -->
		<div class="jumbotron">
		  <h1>Hello, <h:outputText value="#{authenticationController.email}"></h:outputText></h1>
		  <p>Welcome to Televic Traincoach Managment!</p>
		  <p><a class="btn btn-primary btn-lg" href="#" role="button">I am a pointless button</a></p>
		</div>

	</div> <!-- END MASTER ROW -->
</div> <!-- END MASTER CONTAINER -->
</h:body>

<!-- Renders when not logged in and redirect doesnt' work -->
<h:body rendered="#{!authenticationController.hasOperatorAccess()}">
	<div class="container-fluid main_view">
		<div class="row">
			<div class="col-sm-10 col-sm-offset-1">
				<h1>You're not authorized for this page!</h1>
				<h2>It seems like we failed to redirect you to the <a href="login.xhtml">login page</a>.</h2>
			</div>
		</div>
	</div>
</h:body>
</html>	